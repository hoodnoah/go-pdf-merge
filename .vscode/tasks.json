{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "CMake: configure",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-DCMAKE_BUILD_TYPE=Debug",
        "-DCMAKE_C_COMPILER=clang",
        "-S",
        "${workspaceFolder}",
        "-B",
        "${workspaceFolder}/build"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": ["$clangProblemMatcher"],
      "detail": "Configure CMake project"
    },
    {
      "label": "CMake: build",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "${workspaceFolder}/build"],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "dependsOn": "CMake: configure",
      "problemMatcher": ["$clangProblemMatcher"],
      "detail": "Build CMake project"
    },
    {
      "label": "Run Unit Tests",
      "type": "shell",
      "command": "${workspaceFolder}/build/test/UnitTests",
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "problemMatcher": ["$clangProblemMatcher"],
      "detail": "Run unit tests"
    }
  ],
  "problemMatchers": [
    {
      "name": "clangProblemMatcher",
      "owner": "cpp",
      "fileLocation": ["relative", "${workspaceFolder}"],
      "pattern": {
        "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
        "file": 1,
        "line": 2,
        "column": 3,
        "severity": 4,
        "message": 5
      }
    }
  ]
}
